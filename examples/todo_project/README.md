# TodoManager - Implementation Guide

Auto-generated by FlowLang Scaffolder on 2025-10-10 22:46:17

## Overview

This project contains a flow definition and scaffolded task implementations. All tasks are currently **stubs** that need to be implemented.

## Project Structure

```
.
‚îú‚îÄ‚îÄ flow.yaml           # Flow definition (your design)
‚îú‚îÄ‚îÄ tasks.py            # Task implementations (TODO: implement these)
‚îú‚îÄ‚îÄ test_tasks.py       # Unit tests for tasks
‚îú‚îÄ‚îÄ run_server.py       # REST API server
‚îú‚îÄ‚îÄ test_api.sh         # API testing script
‚îî‚îÄ‚îÄ README.md           # This file
```

## Implementation Status

- **Total tasks**: 5
- **Implemented**: 0
- **Pending**: 5
- **Progress**: 0/5 (0.0%)

## Quick Start

### 1. Check Current Status

```bash
python tasks.py
```

This shows which tasks are pending implementation.

### 2. Implement Tasks One by One

Each task in `tasks.py` currently raises `NotImplementedTaskError`. Implement them incrementally:

```python
@registry.register('TaskName')
async def task_name(param1, param2):
    # Remove this line:
    # raise NotImplementedTaskError("TaskName")

    # Add your implementation:
    result = do_something(param1, param2)

    return {
        'output_key': result
    }
```

### 3. Update Implementation Status

After implementing a task, update `get_implementation_status()` in `tasks.py`:

```python
def get_implementation_status() -> Dict[str, Any]:
    tasks = {
        'TaskName': True,  # ‚Üê Changed from False to True
        ...
    }
```

### 4. Run Tests

```bash
# Run all tests
pytest test_tasks.py -v

# Run specific test
pytest test_tasks.py::test_task_name -v
```

Update tests to verify actual behavior instead of expecting `NotImplementedTaskError`.

### 5. Run the REST API Server

Start the API server to make your flow accessible via HTTP:

```bash
python run_server.py
```

The server will start on `http://localhost:8000` with:
- **API Docs**: http://localhost:8000/docs (interactive Swagger UI)
- **Health Check**: http://localhost:8000/health
- **Flow Execution**: POST to http://localhost:8000/flows/TodoManager/execute

#### Execute the Flow via REST API

```bash
# List todos for a user
curl -X POST http://localhost:8000/flows/TodoManager/execute \
  -H "Content-Type: application/json" \
  -d '{"inputs": {"user_id": "user_123", "action": "list"}}'

# Create a new todo
curl -X POST http://localhost:8000/flows/TodoManager/execute \
  -H "Content-Type: application/json" \
  -d '{
    "inputs": {
      "user_id": "user_123",
      "action": "create",
      "title": "Buy groceries",
      "description": "Milk, bread, eggs"
    }
  }'
```

#### API Response Format

```json
{
  "success": true,
  "outputs": {
    "result": "todo_xyz123"
  },
  "execution_time_ms": 45.2,
  "flow": "TodoManager"
}
```

Or run the test script to test all endpoints:

```bash
./test_api.sh
```

### 6. Run the Flow Programmatically (Alternative)

You can also execute flows directly in Python:

```python
import asyncio
from flowlang import FlowExecutor
from tasks import create_task_registry

async def main():
    # Load flow
    with open('flow.yaml') as f:
        flow_yaml = f.read()

    # Create executor
    registry = create_task_registry()
    executor = FlowExecutor(registry)

    # Execute flow
    result = await executor.execute_flow(
        flow_yaml,
        inputs={
            "user_id": "user_123",
            "action": "list"
        }
    )

    print(f"Success: {result['success']}")
    print(f"Outputs: {result['outputs']}")

if __name__ == '__main__':
    asyncio.run(main())
```

## Task List


### 1. CreateTodo

- **Status**: ‚ö†Ô∏è Not implemented
- **Function**: `create_todo`
- **Used in**: create_todo
- **Inputs**: `description, slug, title, user_id`


### 2. GetTodos

- **Status**: ‚ö†Ô∏è Not implemented
- **Function**: `get_todos`
- **Used in**: list_todos
- **Inputs**: `user_id`


### 3. LogInvalidAction

- **Status**: ‚ö†Ô∏è Not implemented
- **Function**: `log_invalid_action`
- **Used in**: log_error
- **Inputs**: `action`


### 4. SendNotification

- **Status**: ‚ö†Ô∏è Not implemented
- **Function**: `send_notification`
- **Used in**: notify_create
- **Inputs**: `message, user_id`


### 5. ValidateUser

- **Status**: ‚ö†Ô∏è Not implemented
- **Function**: `validate_user`
- **Used in**: validate
- **Inputs**: `user_id`


## Development Tips

1. **Start with simple tasks** - Implement logging, validation tasks first
2. **Use TDD approach** - Write/update tests as you implement
3. **Check progress frequently** - Run `python tasks.py` to see status
4. **Test incrementally** - Test each task as you complete it
5. **Mock external dependencies** - Use mock data initially, integrate real APIs later

## Testing Strategy

- **Unit tests**: Test each task in isolation (test_tasks.py)
- **Integration tests**: Test the complete flow execution
- **Use fixtures**: Create reusable test data
- **Mock external calls**: Don't depend on external services in tests

## Next Steps

- [ ] Implement all task stubs
- [ ] Write comprehensive tests
- [ ] Integrate with external APIs/databases
- [ ] Add error handling and retries
- [ ] Add logging and monitoring
- [ ] Deploy to production

## Getting Help

- FlowLang documentation: See CLAUDE.md
- Flow syntax: Check flow.yaml for examples
- Task registry: See src/flowlang/registry.py

Good luck! üöÄ
